nextflow_process {

  name "Test COPY_FASTA"

  script "test-data/extensions/fasta/copy_fasta.nf"
  process "COPY_FASTA"

  test("Should work with fasta") {

    when {
      process {
        """
        input[0] = file("test-data/extensions/fasta/fasta.1.fasta")
        """
      }
    }

    then {
      assert path(process.out.fasta.get(0)).fasta == path("test-data/extensions/fasta/fasta.2.fasta").fasta
    }

  }
  
  test("Should work with fasta.gz") {

    when {
      process {
        """
        input[0] = file("test-data/extensions/fasta/fasta.1.fasta.gz")
        """
      }
    }

    then {
      assert path(process.out.fasta.get(0)).fasta == path("test-data/extensions/fasta/fasta.2.fasta.gz").fasta
    }

  }
  
  test("Should work with fasta.gz and fasta") {

    when {
      process {
        """
        input[0] = file("test-data/extensions/fasta/fasta.1.fasta.gz")
        """
      }
    }

    then {
      assert path(process.out.fasta.get(0)).fasta == path("test-data/extensions/fasta/fasta.2.fasta").fasta
    }

  }  

  test("Should work with neq") {

    when {
      process {
        """
        input[0] = file("test-data/extensions/fasta/fasta.1.fasta.gz")
        """
      }
    }

    then {
      assert path(process.out.fasta.get(0)).fasta != path("test-data/extensions/fasta/fasta.3.fasta").fasta
    }

  } 

}
